
<!-- saved from url=(0048)file:///C:/Users/Administrator/Desktop/test.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Evernote Export</title>
  <basefont  face="微软雅黑"  size="2">
  
  <meta  name="exporter-version"  content="Evernote Windows/277915; Windows/6.1.7601 Service Pack 1 (Win64);">
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a  name="465">

</a><div><a  name="465">
<span></span></a><div><a  name="465"><p  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span  style="font-size: 16px;"><span  style="font-size: 18px;">&nbsp;“一对二”，“过”，“过”<span  style="font-family: &#39;Times New Roman&#39;;">……</span>这声音熟悉吗？你会想到什么？对！纸牌。在类似“斗地主”这样的纸牌游戏中，某人出牌给他的下家，下家看看手中的牌，如果要不起上家的牌则将出牌请求再转发给他的下家，其下家再进行判断。一个循环下来，如果其他人都要不起该牌，则最初的出牌者可以打出新的牌。在这个过程中，牌作为一个请求沿着一条链在传递，每一位纸牌的玩家都可以处理该请求。在设计模式中，我们也有一种专门用于处理这种请求链式传递的模式，它就是本章将要介绍的职责链模式。</span></span></p><p  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">&nbsp;</p><h2  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span  style="font-size: 24px;"><span  style="font-family: Arial;">16.1&nbsp;</span>采购单的分级审批</span></h2><table  border="1"  cellpadding="0"  cellspacing="0"  style="color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(247, 247, 247); background-position: initial initial; background-repeat: initial initial;"><tbody><tr><td  valign="top"><p  style="margin: 0px; padding: 0px;"><span  style="font-size: 16px;"><span  style="font-size: 18px;"><span  style="font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sunny</span>软件公司承接了某企业<span  style="font-family: &#39;Times New Roman&#39;;">SCM(Supply Chain Management</span>，供应链管理<span  style="font-family: &#39;Times New Roman&#39;;">)</span>系统的开发任务，其中包含一个采购审批子系统。该企业的采购审批是分级进行的，即根据采购金额的不同由不同层次的主管人员来审批，主任可以审批<span  style="font-family: &#39;Times New Roman&#39;;">5</span>万元以下（不包括<span  style="font-family: &#39;Times New Roman&#39;;">5</span>万元）的采购单，副董事长可以审批<span  style="font-family: &#39;Times New Roman&#39;;">5</span>万元至<span  style="font-family: &#39;Times New Roman&#39;;">10</span>万元（不包括<span  style="font-family: &#39;Times New Roman&#39;;">10</span>万元）的采购单，董事长可以审批<span  style="font-family: &#39;Times New Roman&#39;;">10</span>万元至<span  style="font-family: &#39;Times New Roman&#39;;">50</span>万元（不包括<span  style="font-family: &#39;Times New Roman&#39;;">50</span>万元）的采购单，<span  style="font-family: &#39;Times New Roman&#39;;">50</span>万元及以上的采购单就需要开董事会讨论决定。如图<span  style="font-family: &#39;Times New Roman&#39;;">16-1</span>所示：</span></span></p><p  align="center"  style="margin: 0px; padding: 0px;"><img  src="./Evernote Export_files/1333307283_7751.gif"  style="border: none; max-width: 100%; height: auto;"></p><p  align="center"  style="margin: 0px; padding: 0px;"><strong><span  style="font-size: 14px;">图<span  style="font-family: &#39;Times New Roman&#39;;">16-1&nbsp;</span>采购单分级审批示意图</span></strong></p></td></tr></tbody></table><p  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span  style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="font-size: 18px;">如何在软件中实现采购单的分级审批？<span  style="font-family: &#39;Times New Roman&#39;;">Sunny</span>软件公司开发人员提出了一个初始解决方案，在系统中提供一个采购单处理类<span  style="font-family: &#39;Times New Roman&#39;;">PurchaseRequestHandler</span>用于统一处理采购单，其框架代码如下所示：</span></span></p></a><div  style="font-family: Consolas, &#39;Courier New&#39;, Courier, mono, serif; font-size: 12px; background-color: rgb(231, 229, 220); width: 936.53125px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><a  name="465"></a><div  style="padding-left: 45px;"><a  name="465"></a><div  style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108);"><a  name="465"><b>[java]</b>&nbsp;</a><a  href="http://blog.csdn.net/lovelion/article/details/7420891#"  style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-position: 0% 0%; background-repeat: no-repeat no-repeat;"  title="view plain">view plain</a>&nbsp;<a  href="http://blog.csdn.net/lovelion/article/details/7420891#"  style="color: rgb(160, 160, 160); text-decoration: none; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-position: 0% 0%; background-repeat: no-repeat no-repeat;"  title="copy">copy</a></div></div><ol  start="1"  style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//采购单处理类</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">class</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;PurchaseRequestHandler&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//递交采购单给主任</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;sendRequestToDirector(PurchaseRequest&nbsp;request)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;(request.getAmount()&nbsp;&lt;&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">50000</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//主任可审批该采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.handleByDirector(request);&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;(request.getAmount()&nbsp;&lt;&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">100000</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//副董事长可审批该采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.handleByVicePresident(request);&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">if</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;(request.getAmount()&nbsp;&lt;&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">500000</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//董事长可审批该采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.handleByPresident(request);&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">else</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//董事会可审批该采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">this</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.handleByCongress(request);&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//主任审批采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;handleByDirector(PurchaseRequest&nbsp;request)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//代码省略</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//副董事长审批采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;handleByVicePresident(PurchaseRequest&nbsp;request)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//代码省略</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//董事长审批采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;handleByPresident(PurchaseRequest&nbsp;request)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//代码省略</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//董事会审批采购单</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">public</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;</span><span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); background-color: inherit; font-weight: bold;">void</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;handleByCongress(PurchaseRequest&nbsp;request)&nbsp;{&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span  style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//代码省略</span><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;</span></span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(255, 255, 255); color: inherit;"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li  style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span  style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}&nbsp;&nbsp;</span></li></ol></div><p  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">&nbsp;<span  style="font-size: 16px;"><span  style="font-size: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 问题貌似很简单，但仔细分析，发现上述方案存在如下几个问题：</span></span></p><p  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span  style="font-size: 16px;"><span  style="font-size: 18px;"><span  style="font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1)PurchaseRequestHandler</span>类较为庞大，各个级别的审批方法都集中在一个类中，违反了“单一职责原则”，测试和维护难度大。</span></span></p><p  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span  style="font-size: 16px;"><span  style="font-size: 18px;"><span  style="font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2)</span>如果需要增加一个新的审批级别或调整任何一级的审批金额和审批细节（例如将董事长的审批额度改为<span  style="font-family: &#39;Times New Roman&#39;;">60</span>万元）时都必须修改源代码并进行严格测试，此外，如果需要移除某一级别（例如金额为<span  style="font-family: &#39;Times New Roman&#39;;">10</span>万元及以上的采购单直接由董事长审批，不再设副董事长一职）时也必须对源代码进行修改，违反了“开闭原则”。</span></span></p><p  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span  style="font-size: 16px;"><span  style="font-size: 18px;"><span  style="font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (3)</span>审批流程的设置缺乏灵活性，现在的审批流程是“主任--&gt;副董事长--&gt;董事长--&gt;董事会”，如果需要改为“主任--&gt;董事长--&gt;董事会”，在此方案中只能通过修改源代码来实现，客户端无法定制审批流程。</span></span></p><div  style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Arial; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 14px;"><div><span  style="font-size: 16px;"><span  style="font-size: 18px;"><span  style="font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>如何针对上述问题对系统进行改进？<span  style="font-family: &#39;Times New Roman&#39;;">Sunny</span>公司开发人员迫切需要一种新的设计方案，还好有职责链模式，通过使用职责链模式我们可以最大程度地解决这些问题，下面让我们正式进入职责链模式的学习。</span></span></div></div></div>
</div></body></html>